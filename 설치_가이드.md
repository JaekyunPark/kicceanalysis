# Survey Analysis Project - 설치 및 사용 가이드

## 📋 목차
1. [시스템 요구사항](#시스템-요구사항)
2. [설치 방법](#설치-방법)
3. [초기 설정](#초기-설정)
4. [사용 방법](#사용-방법)
5. [코드북 형식](#코드북-형식)
6. [문제 해결](#문제-해결)

---

## 시스템 요구사항

- Python 3.8 이상
- Windows, macOS, Linux

---

## 설치 방법

### 1단계: 압축 파일 해제
다운로드한 `survey_project_complete.tar.gz` 파일을 원하는 위치에 압축 해제합니다.

**Windows (7-Zip, WinRAR 등 사용):**
- 파일 우클릭 → 압축 해제

**Mac/Linux:**
```bash
tar -xzf survey_project_complete.tar.gz
cd survey_project_complete
```

### 2단계: 가상환경 생성

**Windows:**
```cmd
python -m venv myenv
myenv\Scripts\activate
```

**Mac/Linux:**
```bash
python3 -m venv myenv
source myenv/bin/activate
```

가상환경이 활성화되면 프롬프트 앞에 `(myenv)`가 표시됩니다.

### 3단계: 패키지 설치
```bash
pip install -r requirements.txt
```

설치되는 패키지:
- Django 4.2.7
- pandas 2.1.3
- openpyxl 3.1.2
- scipy 1.11.4
- numpy 1.26.2
- Pillow 10.1.0
- pyreadstat 1.2.4

---

## 초기 설정

### 1단계: 데이터베이스 마이그레이션
```bash
python manage.py makemigrations
python manage.py migrate
```

### 2단계: 슈퍼유저(관리자) 생성
```bash
python manage.py createsuperuser
```

다음 정보를 입력하세요:
- 사용자명 (예: admin)
- 이메일 (선택사항)
- 비밀번호 (최소 8자)

### 3단계: 서버 실행
```bash
python manage.py runserver
```

서버가 실행되면 다음과 같은 메시지가 표시됩니다:
```
Starting development server at http://127.0.0.1:8000/
```

### 4단계: 접속
웹 브라우저를 열고 다음 주소로 이동:
- **메인 사이트**: http://127.0.0.1:8000/
- **관리자 페이지**: http://127.0.0.1:8000/admin/

---

## 사용 방법

### 1. 데이터 업로드

1. 로그인 후 **데이터 관리 → 데이터 업로드** 선택
2. 데이터 이름 입력
3. CSV 또는 Excel 파일 선택
4. (선택사항) 설명 입력
5. **업로드** 버튼 클릭

**지원 형식:**
- CSV (.csv)
- Excel (.xlsx, .xls)

### 2. 코드북 업로드

1. **코드북 관리 → 코드북 업로드** 선택
2. 코드북 이름 입력
3. (선택사항) 연결할 데이터셋 선택
4. Excel 파일 선택
5. **업로드** 버튼 클릭

### 3. 통계 분석 수행

1. **통계 분석** 메뉴 선택
2. **데이터 선택**: 분석할 데이터 선택
3. **코드북 선택**: 사용할 코드북 선택 (선택사항)
4. **행 변수 선택**: 분석할 행 변수 추가
5. **열 변수 및 통계량 선택**: 
   - 열 변수 추가
   - 각 변수마다 원하는 통계량 체크박스 선택
6. **분석 실행** 버튼 클릭

**선택 가능한 통계량:**
- **빈도/백분율**: 빈도(N), 행%, 열%
- **중심경향**: 평균, 중앙값
- **산포도**: 표준편차, 최솟값, 최댓값
- **4분위수**: Q1(25%), Q3(75%)

**자동 통계 검정:**
- 행%/열% 선택 시 → Chi-square 검정
- 평균 선택 + 2개 그룹 → t-test
- 평균 선택 + 3개 이상 그룹 → ANOVA

---

## 코드북 형식

코드북은 Excel 파일(.xlsx 또는 .xls)로 다음 컬럼을 포함해야 합니다:

| Variable | Variable Label | Value | Value Label |
|----------|---------------|-------|-------------|
| Q1       | 성별          | 1     | 남성        |
| Q1       |               | 2     | 여성        |
| Q2       | 연령대        | 1     | 20대        |
| Q2       |               | 2     | 30대        |
| Q2       |               | 3     | 40대        |
| Q3       | 만족도        | 1     | 매우 불만족 |
| Q3       |               | 2     | 불만족      |
| Q3       |               | 3     | 보통        |
| Q3       |               | 4     | 만족        |
| Q3       |               | 5     | 매우 만족   |

**작성 규칙:**
1. 첫 번째 행은 헤더(Variable, Variable Label, Value, Value Label)
2. Variable 컬럼: 변수명 (첫 번째 값만 입력, 나머지는 비워둠)
3. Variable Label: 변수 설명
4. Value: 값 코드
5. Value Label: 값 설명

**예시 파일 다운로드:**
- [샘플 코드북](예시_코드북.xlsx) (별도 제공)

---

## 문제 해결

### 문제 1: "No module named 'django'"
**해결방법:**
```bash
pip install -r requirements.txt
```
또는
```bash
pip install pyreadstat
```

### 문제 2: "Port is already in use"
**해결방법:**
다른 포트로 서버 실행
```bash
python manage.py runserver 8001
```

### 문제 3: 코드북이 목록에 나타나지 않음
**해결방법:**
1. 코드북 업로드 시 데이터셋 선택 확인
2. 데이터를 먼저 선택한 후 코드북 목록 확인

### 문제 4: 분석 결과가 이상함
**체크사항:**
1. 데이터 파일에 헤더(첫 행)가 있는지 확인
2. 변수명에 특수문자나 공백이 없는지 확인
3. 코드북의 Variable 값이 데이터의 실제 컬럼명과 일치하는지 확인

### 문제 5: 파일 업로드 실패
**해결방법:**
1. 파일 크기 확인 (10MB 이하 권장)
2. 파일 형식 확인 (.csv, .xlsx, .xls만 가능)
3. 파일이 다른 프로그램에서 열려있지 않은지 확인

---

## 추가 정보

### 서버 종료
```bash
Ctrl + C
```

### 가상환경 종료
```bash
deactivate
```

### 데이터 백업
다음 파일들을 백업하세요:
- `db.sqlite3` (데이터베이스)
- `media/` 폴더 (업로드된 파일들)

---

## 문의사항

문제가 발생하거나 질문이 있으면:
1. 오류 메시지 전체를 캡처
2. 수행한 작업 단계 기록
3. 사용한 데이터/코드북 파일 준비

---

**버전:** 1.0
**최종 업데이트:** 2024년
